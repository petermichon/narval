(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))t(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(a){if(a.ep)return;a.ep=!0;const l=e(a);fetch(a.href,l)}})();function f(o){const n={...o};return n.map=new Map(o.map),n}function b(){return{map:new Map,default:void 0}}function y(o,n){return o.map.has(n)?o.map.get(n):o.default}function w(o,n,e){const t=f(o);return t.map.set(n,e),t}function E(o,n){const e=f(o);return e.default=n,e}class C{constructor(){this.dmap=b()}default(n){const e=E(this.dmap,n);this.dmap=e}get(n){return y(this.dmap,n)}set(n,e){const t=w(this.dmap,n,e);this.dmap=t}}function g(o){const n=`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${o.id}&format=json`,e=`https://img.youtube.com/vi/${o.id}/maxresdefault.jpg`,t=document.createElement("div");t.className="relative overflow-hidden bg-white p-0 hover:scale-100 transition-all duration-180 md:rounded-lg bg-white text-black dark:bg-neutral-900 dark:text-white";const a=document.createElement("div");a.className="rounded-md aspect-video relative bg-gray-50 dark:bg-neutral-800",t.appendChild(a);const l=document.createElement("div");l.className="h-7 m-3 rounded-lg animate-pulse z-10 bg-gray-200 dark:bg-neutral-700",t.appendChild(l);const s=document.createElement("div");s.className="h-2 m-2 w-1/4 rounded-full animate-pulse bg-gray-200 dark:bg-neutral-700",t.appendChild(s);{const i=document.createElement("div");i.className="h-1 sm:hidden bg-gray-200 dark:bg-neutral-700",t.appendChild(i)}return fetch(n).then(i=>i.json()).then(i=>{{const r=document.createElement("img");r.src=e,r.className="sm:rounded-md relative w-full h-full aspect-video object-cover opacity-0 transition-opacity duration-500 z-1",r.loading="lazy",r.onload=()=>{r.classList.add("opacity-100")},a.appendChild(r)}{const r=document.createElement("img");r.src=e,r.className="absolute inset-0 w-full h-full object-cover z-0 opacity-20 blur-3xl scale-80 saturate-1000 contrast-100 brightness-100 dark:contrast-20",r.loading="lazy",t.appendChild(r)}{const r=document.createElement("p");r.textContent=i.title,r.className="relative text-sm text-black line-clamp-2 items-center align-center m-2 z-1 min-h-[3rem] leading-[1.5rem] text-black dark:text-white",r.style="font-family: 'Roboto', sans-serif",l.replaceWith(r)}{const r=document.createElement("p");r.textContent=i.author_name,r.className="relative bottom-0 text-xs m-2 line-clamp-2 z-1 text-gray-500 dark:text-gray-400",r.style="font-family: 'Roboto', sans-serif",r.style.cursor="pointer",s.replaceWith(r)}t.style.cursor="pointer",t.addEventListener("click",()=>{const r=new CustomEvent("video-click",{detail:{video:o}});t.dispatchEvent(r)})}),t}function v(o){const n=document.createElement("div");{const e=document.createElement("div");e.className="sm:p-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 p-0 sm:gap-3 bg-white text-black dark:bg-neutral-900 dark:text-white",n.appendChild(e);for(const t of o){const a=g(t);e.appendChild(a),a.addEventListener("video-click",l=>{const s=new CustomEvent("video-click",{detail:{video:t}});n.dispatchEvent(s)})}}return n}function x(o){const n=document.createElement("div");n.className="relative w-full aspect-video lg:aspect-[2.15/1]";{const e=`https://www.youtube-nocookie.com/embed/${o.id}?start=${o.time}`,t=document.createElement("iframe");t.style.margin="0px",t.style.padding="0px",t.src=e,t.allowFullscreen=!0,t.referrerPolicy="strict-origin-when-cross-origin",t.className="w-full h-full",t.addEventListener("load",()=>{console.log("iframe loaded")}),n.appendChild(t)}return n}function k(o){return document.createElement("div")}function N(){let o=document.createElement("div");{const e=localStorage.getItem("channels")||"[]";JSON.parse(e).push({id:"UCEi0DIwuAQNe68OK_1hAN7w",videos:[{id:"hFOkrLuf94M"},{id:"saVzevTylc4"}]}),console.log(JSON.parse(localStorage.getItem("channels")||"[]"))}{const e=localStorage.getItem("videos")||"[]",t=JSON.parse(e);t.push({id:"saVzevTylc4"}),t.push({id:"hFOkrLuf94M"}),console.log(JSON.parse(localStorage.getItem("videos")||"[]"))}const n=JSON.parse(localStorage.getItem("videos")||"[]");o=v(n);{const e=document.createElement("input");e.type="text",e.placeholder="Type something and press Enter",e.className="w-80 p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-100 shadow-sm",e.style="font-family: 'Roboto', sans-serif",e.addEventListener("keydown",t=>{if(t.key==="Enter"){console.log(e.value);const a=g({id:e.value,time:"0"});e.value="",o.appendChild(a)}}),o.appendChild(e)}return o}function h(){const o=document.createElement("div");o.className="flex p-3 bg-white text-black dark:bg-neutral-900 dark:text-white";{const n=document.createElement("div");n.className="flex cursor-pointer",n.addEventListener("click",()=>{const e=new CustomEvent("logo-click");o.dispatchEvent(e)}),o.appendChild(n);{const e=document.createElement("img");e.className="w-9 h-9 ml-4 mr-1",e.src="./narval.png",n.appendChild(e)}{const e=document.createElement("div");e.className="text-3xl font-bold pr-3 font-sans hidden lg:block",e.textContent="narval",e.style="font-family: 'Roboto', sans-serif",n.appendChild(e)}}return o}function L(o){const n={id:o},e=document.createElement("div");{const t=document.createElement("p");t.textContent="",t.className="text-xl font-bold line-clamp-2 pt-3 pl-6 text-black dark:text-white text-[19px] tracking-[-0.0px] transform scale-y-100",t.style="font-family: 'Roboto', sans-serif font-variant-numeric: tabular-nums;",e.appendChild(t);const a=document.createElement("p");a.textContent="",a.className="text-sm font-bold line-clamp-2 pt-2 pl-6 text-black dark:text-white",a.style="font-family: 'Roboto', sans-serif font-variant-numeric: tabular-nums;",e.appendChild(a);{const l=`https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${n.id}&format=json`;fetch(l).then(s=>s.json()).then(s=>{t.textContent=s.title,a.textContent=s.author_name})}}return e}function d(o){let n=[];const e=document.getElementById("app");if(!e)throw new Error("app not found");const t=new C;t.set("/",()=>{document.title="Narval",fetch("videos.json").then(l=>l.json()).then(l=>{n=l;const s=h(),i=v(n),r=document.createElement("div");r.className="h-20 bg-white dark:bg-neutral-900";const m=document.createElement("nav");m.className="absolute w-full p-7 fixed bottom-0 left-0 right-0 lg:hidden z-2 opacity-90 backdrop-blur-md bg-gray-100 dark:bg-neutral-900",i.addEventListener("video-click",c=>{const u=c.detail.video;history.pushState({},"",`/video?v=${u.id}&t=${u.time}`),d("/video")}),s.addEventListener("logo-click",c=>{}),e.innerHTML="",e.appendChild(s),e.appendChild(i),e.appendChild(r),e.appendChild(m)})}),t.set("/feed",()=>{history.pushState({},"","/"),d("/")}),t.set("/video",()=>{document.title="Narval - Video";const l=new URLSearchParams(globalThis.location.search),s=l.get("v")||"",i=l.get("t")||"0",r={id:s,time:i},m=x(r),c=h(),u=L(r.id),p=document.createElement("div");p.className="h-20 bg-white dark:bg-neutral-900",c.addEventListener("logo-click",T=>{history.pushState({},"","/"),d("/")}),e.innerHTML="",e.appendChild(c),e.appendChild(m),e.appendChild(u),e.appendChild(p)}),t.set("/channel",()=>{document.title="Narval - Channel",new URLSearchParams(globalThis.location.search).get("c");const s=k();e.innerHTML="",e.appendChild(s)}),t.set("/library",()=>{document.title="Narval - Library",e.innerHTML="",e.appendChild(N())}),t.get(o)()}function S(){const o=globalThis.location.pathname;globalThis.addEventListener("popstate",n=>{d(globalThis.location.pathname)}),d(o)}S();
